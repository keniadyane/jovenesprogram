<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIN</title>
    <link rel="stylesheet" href="cssp/style.css">
</head>

<body>
    <h1>Ingresa tu PIN</h1>

<form>
    <label for="pin:">Ingresa:</label>
    <input type="number" id="pin" name="pin" placeholder="4321" required>
    <button type="button" onclick="validarPin()">Validar</button>
</form>
    <p id="mensaje"></p>

    <div class="menu" id="menu">
        <button onclick="seleccionarOpcion(1)">Opción 1: Ver saldo</button>
        <button onclick="seleccionarOpcion(2)">Opción 2: Retirar dinero</button>
        <button onclick="seleccionarOpcion(3)">Opción 3: Salir</button>
    </div>

    <script>
        const PIN_CORRECTO = 1234;
        let intentosRestantes = 3; // Numero de intentos permitidos

        function validarPin() {
            const pin = parseInt(document.getElementById('pin').value);

            const mensaje = document.getElementById('mensaje');

            if (pin === PIN_CORRECTO) {
                // validar que el pin es correcto.
                mensaje.textContent = 'Bienvenido. Seleccione una opción: ...'
                mensaje.style.color = 'green';

                document.querySelector('form').style.display = 'none';
                document.getElementById('menu').style.display ='flex';

            }
            else {
                intentosRestantes--; //reducir el num de intentos.
                if(intentosRestantes > 0) {
                    mensaje.textContent = `PIN incorrecto. Intentos restantes: ${intentosRestantes}`;
                    mensaje.style.color = 'red';
                } else {
                    mensaje.textContent = 'Cuenta Bloqueada. Contacte al administrador. '
                    mensaje.style.color = 'red';

                    document.getElementById('pin').disabled = true;
                    document.querySelector('form button').disabled = true;                
                }

            }
        }

        function seleccionarOpcion(opcion) {
            const mensaje = document.getElementById('mensaje');
        switch(opcion)   {
            case 1:
                mensaje.textContent = 'Has Seleccionado: Ver saldo.';
                break;
            case 2:
                mensaje.textContent = 'Has Seleccionado: Retirar Dinero. ';
                break;
            case 3:
                mensaje.textContent = 'Has Seleccionado: Salir.';
            default: 
                mensaje.textContet = 'Opcion no válida.';
            }    
            mensaje.style.color = 'blue';
     }

    </script>

</body>

</html>